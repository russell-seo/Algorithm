

# 운영체제

  - 운영체제란?
    
    - 컴퓨터 하드웨어 바로 윗단에 설치되는 소프트웨어를 뜻한다.
    - 컴퓨터 하드웨어와 소프트웨어, 사용자의 사이에서 중재자 역할을 한다.
    - 일반적으로 컴퓨터를 사용하면서 실행한 모든 프로그램들은 운영체제에서 관리하고 제어한다.
    - 대표적인 운영체제로는 Windows, Linux, Mac OSX, IOS 등이 있다.

![image](https://user-images.githubusercontent.com/79154652/143535921-2b0749ca-87aa-4f7b-8b4a-4d8ccefa380f.png)

 
 
# 부팅

  - 컴퓨터의 구조를 단순화하면 아래 그림과 같다.
  
  ![image](https://user-images.githubusercontent.com/79154652/143535994-4158d178-ac5f-4695-a17c-5e797a5a8ca3.png)



  Processor는 일반적으로 CPU를 말한다. Main Memory를 보면 ROM과 RAM으로 나누어져 있다.
  
  - ROM : 비휘발성으로 메모리에서 극히 일부를 차지한다. 전원이 꺼져도 그 안의 내용이 계속 유지된다.
  - RAM : 휘발성으로 메모리의 대부분을 차지하며 실제 프로그램이 할당되는 곳이다. 전원이 꺼지면 메모리안의 모든 내용이 지워진다.

   컴퓨터의 전원이 켜지면 프로세서(CPU)에서 ROM에 있는 내용을 읽는다. ROM 안에는 POST(Power-On Self-Test), 부트 로더(boot loader)가 저장되어 있다.
   POST는 전원이 켜지면 가장 처음에 실행되는 프로그램으로 현재 컴퓨터의 상태를 검사한다. POST는 전원이 켜지면 가장 처음에 실행되는 프로그램으로 현재 컴퓨터의 상태를 검사한다.
   POST작업이 끝나면 부트 로더가 실행된다. 부트 로더는 하드디스크에 저장되어 있는 `운영체제`를 찾아서 메인메모리(RAM)에 가지고온다. 이러한 부트 로더의 과정을 `부팅` 이라고 한다.

![image](https://user-images.githubusercontent.com/79154652/143537063-e116385f-3252-4425-bb3b-20ef0c01f380.png)



## 커널(Kernel)과 명령어 해석기(Shell)

  - 운영체제는 크게 커널과 명령어 해석기로 나뉜다.
  
  ![image](https://user-images.githubusercontent.com/79154652/143537326-d0f02612-ca9a-4b32-9de9-bb9d4a8c42bf.png)


  커널은 말 그대로 운영체제의 핵심으로 운영체제가 수행하는 모든 것이 저장되어 있다.
  쉘은 사용자가 커널(운영체제)에 요청하는 명령어를 해석하여 커널에 요청하고 그 결과를 출력한다.
  
  사용자는 GUI나 CLI 같은 방식으로 운영체제에 명령을 요청할 수 있는데, 예를 들어 현재 디렉토리의 파일 리스트 불러오기, 프로그램 실행, 디스크 용량 확인 등 다양하게 존재 한다.
  
 
## 멀티 프로세스와 멀티 쓰레드

  #### 멀티 프로세스
  
  멀티프로세스란 하나의 응용 프로그램을 여러개의 프로세스로 구성하여 각 프로세스가 하나의 작업을 처리하도록 하는 것 이다.
  
  - 장점
    
   - 멀티 프로세싱은 여러 개의 자식 프로세스 중 하나에 문제가 발생해도 다른 프로세스들이 있기 때문에 영향이 확산되지 않는다.
    
  - 단점
    
    - Context Switching 과정에서 캐시 메모리 초기화 등 무거운 작업이 진행되고 많은 시간이 소모되는 등 오버헤드가 발생한다.
    - 프로세스는 각각 독립된 메모리 영역을 가지고 있기 때문에 프로세스 사이에서 공유하는 메모리는 없다. 따라서 Context Switching이 발생하면
      캐시에 있는 모든 데이터를 모두 리셋하고 다시 캐시 정보를 불러와야 한다.
    - 독립된 영역 때문에 프로세스간의 통신이 필요하다.


  #### 멀티 쓰레드
  
  멀티 쓰레드는 하나의 프로그램을 여러개의 쓰레드로 구성하는 방식이다.
  
  ![image](https://user-images.githubusercontent.com/79154652/143539648-54544388-9277-4de8-b117-f41376cb033f.png)


  - 장점
     
     - 멀티 스레드는 Stack을 제외한 자원들을 공유하고 있기 때문에 Context Switching 시에 캐시 메모리를 비울 필요가 없고 이를 통해서 리소스를 아낄 수 있다.
     -  Stack 이외의 메모리를 공유하고 있기 때문에 통신의 부담도 적다.

  - 단점

    - 내부의 메모리를 공유하고 있어서 한 프로세스의 쓰레드가 문제가 생기면 해당 프로세스 안의 다른 쓰레드에도 문제가 생긴다.
    - 같은 데이터를 공유하기에 데이터 동기화에 신경을 써야한다.


  #### Context Switching
  
  Context Switching 이란 하나의 프로세스가 CPU를 사용중인 상태에서 다른 프로세스가 CPU를 사용하도록 하기 위해, 이전의 프로세스 상태를 보관하고 새로운 프로세스의 상태를 적재하는 작업을 말한다. 한 프로세스의 문맥(상태)은 프로세스 제어 블록(PCB)에 기록되어 있다.
  
  ![image](https://user-images.githubusercontent.com/79154652/143540373-4eaae5be-12b8-43d8-bd49-b900130429a4.png)


P1 -> P2, P2 -> P1 의 Context Switching 과정은 다음과 같다.

  1. P1의 실행 중에 Interrupt 또는 System call 이 발생하면 P1은 idle 상태가 된다.
  2. P1이 executing 상태에서 idle 상태로 변할 때 프로세스와 실행에 대한 데이터는 레지스터에 존재하는데 이 데이터를 메모리에 저장한다.
  3. 그 다음 P2가 실행되는데 P2가 실행되기 위해서 메모리에 존재하는 P2에 대한 데이터를 레지스테어 올려야한다.
  4. P2가 실행되었다가 다시 idle 상태로 변경되면서 자신의 데이터를 메모리에 저장한다.
  5. 다음에 P1이 실행되는데 P1의 데이터를 메모리에 저장했었다. 이 데이터를 읽어서 레지스터에 올리고 P1을 이전에 멈추었던 시점에서 이어서 실행한다.
 
